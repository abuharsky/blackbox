# Flow (RU)

`Flow<T>` — агрегированное реактивное состояние, построенное из нескольких источников.

## FlowBuilder

```dart
final flow = FlowBuilder<String>()
  .on<int>(boxA, (v) => 'a=$v')
  .on<int>(boxB, (v) => 'b=$v')
  .build(initial: 'init');
```

`on<S>(source, map)` — подписывает flow на source и преобразует значение в `T`.

---

## Семантика initial

`initial` — **fallback**, а не гарантированное первое событие.

- Если есть синхронные источники, которые сразу имеют значение, они **перебьют** initial немедленно.
- Если источники асинхронные и ещё loading, initial будет эмитнут до readiness.

Это сделано, чтобы избежать «мигания init → real» в sync сценариях.

---

## Рекомендации по тестам Flow

- Для sync источников проверяйте, что initial не эмитится (или эмитится только если нет источников).
- Для async источников проверяйте последовательность:
  - initial
  - затем mapped value после readiness
